<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>×§×œ×¤×™ ×©×™×— ×–×•×’×™ â€“ 40 ×§×œ×¤×™×</title>
<style>
:root{
  --bg:#0b1220;
  --card:#121a2b;
  --ink:#eaf2ff;
  --muted:#b9c7e6;
  --accent:#6aa9ff;
  --good:#39d98a;
  --warn:#ffd166;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Hebrew", "Rubik", Arial, sans-serif;
  background: radial-gradient(1200px 600px at 70% -10%, #1d2b4a 0%, transparent 60%),
              radial-gradient(900px 500px at -20% 110%, #1a2742 0%, transparent 60%),
              var(--bg);
  color:var(--ink);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:32px;
}
.app{width:min(880px,100%);}
.shell{background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
border:1px solid rgba(255,255,255,0.08); border-radius:22px; box-shadow:0 20px 60px rgba(0,0,0,0.35); overflow:hidden}
header{padding:18px 20px; display:flex; align-items:center; gap:12px; justify-content:space-between; background:rgba(10,15,25,0.6); border-bottom:1px solid rgba(255,255,255,0.08); backdrop-filter: blur(6px);}
.brand{display:flex; align-items:center; gap:12px}
.logo{width:36px; height:36px; border-radius:12px; background:conic-gradient(from 220deg at 50% 50%, #5cabff, #7ae0ff, #5cabff); box-shadow:inset 0 0 18px rgba(255,255,255,0.5), 0 6px 22px rgba(106,169,255,0.5)}
.title{font-weight:700; letter-spacing:0.2px}
.muted{color:var(--muted); font-size:14px}
.row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.btn{appearance:none; border:none; border-radius:14px; padding:10px 14px; color:#0c1322; background:white; font-weight:700; cursor:pointer}
.btn.ghost{background:transparent; color:var(--ink); border:1px solid rgba(255,255,255,0.2)}
.btn.accent{background:linear-gradient(180deg,#86b9ff,#5ba1ff); color:#081222}
.btn:disabled{opacity:.5; cursor:not-allowed}
.main{padding:22px}
.panel{display:grid; gap:18px}
.card{position:relative; min-height:220px; background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.1); border-radius:20px; padding:26px; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center;}
.card h2{margin:0; font-size:28px; line-height:1.4; font-weight:800}
.card textarea{margin-top:12px; width:90%; height:60px; border-radius:12px; border:1px solid rgba(255,255,255,0.2); padding:6px; background:rgba(255,255,255,0.05); color:var(--ink); resize:none;}
.card .badge{position:absolute; top:14px; inset-inline-start:14px; font-size:12px; color:var(--bg); background:var(--warn); padding:4px 8px; border-radius:999px; font-weight:800}
.card .idx{position:absolute; top:14px; inset-inline-end:14px; font-size:12px; color:var(--muted);}
.toolbar{display:flex; flex-wrap:wrap; gap:10px; justify-content:center}
.toolbar .btn{padding:10px 12px}
.statusbar{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 14px; border:1px dashed rgba(255,255,255,0.18); border-radius:14px; color:var(--muted)}
.grow{flex:1}
.start{display:grid; gap:16px; text-align:center; padding:26px}
.pill{display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.1); color:var(--muted); font-size:14px}
.tip{font-size:14px; color:var(--muted); text-align:center}
.small{font-size:12px}
.settingsPanel{display:none; position:fixed; top:50px; right:50px; background:rgba(20,30,50,0.95); border-radius:14px; padding:16px; border:1px solid rgba(255,255,255,0.2);}
.settingsPanel label{display:block; margin:6px 0; font-size:14px; color:var(--muted);}
</style>
</head>
<body>
<div class="app">
<div class="shell" id="app">
<header>
<div class="brand">
<div class="logo" aria-hidden="true"></div>
<div>
<div class="title">×§×œ×¤×™ ×©×™×— ×–×•×’×™</div>
<div class="muted small">40 ×§×œ×¤×™× Â· ×œ×œ× ××™× ×˜×¨× ×˜ Â· ×’×¨×¡×ª ××—×©×‘</div>
</div>
</div>
<div class="row">
<button class="btn ghost" id="btnHow">××™×š ××©×—×§×™×?</button>
<button class="btn accent" id="btnStart">×”×ª×—×œ</button>
<button class="btn ghost" id="btnSettings">âš™ ×”×’×“×¨×•×ª</button>
</div>
</header>
<div class="main">
<div class="panel" id="panel">
<section class="start" id="screenStart">
<div class="pill">ğŸ¯ ××˜×¨×ª ×”××©×—×§: ×–××Ÿ ×©×œ ×”×§×©×‘×”, ×—×™×‘×•×¨ ×•×©×™×—×” × ×™× ×•×—×”</div>
<h1 style="margin:0">×‘×¨×•×›×™× ×”×‘××™×</h1>
<p class="muted" style="margin-top:0">×›×œ ×§×œ×£ ××¦×™×¢ ×©××œ×” ×œ×¤×ª×™×—×ª ×©×™×—×”. ×¢× ×• ×‘×ª×•×¨×›×. ××™×Ÿ × ×›×•×Ÿ ××• ×œ× × ×›×•×Ÿ.</p>
<div class="toolbar" style="justify-content:center">
<button class="btn accent" id="btnPlayMixed">×©×—×§×• ××¢×•×¨×‘×‘ ğŸ²</button>
<button class="btn" id="btnPlayLeveled">×©×—×§×• ××“×•×¨×’ â¬†ï¸</button>
</div>
<div class="tip">×˜×™×¤: ×”×’×“×™×œ×• ×œ××¡×š ××œ× (F11) ×•× ×©××• ×¢××•×§. ×–×” ×”×–××Ÿ ×©×œ×›×. ğŸ’™</div>
</section>

<section id="screenGame" style="display:none">
<div class="statusbar">
<div>â±ï¸ ×–××Ÿ ××©×—×§: <strong id="clock">00:00</strong></div>
<div class="grow"></div>
<div>×§×œ×£ <strong id="pos">1</strong>/<span id="total">40</span></div>
</div>
<div class="card" id="card">
<div class="badge" id="badge"></div>
<div class="idx" id="idx"></div>
<h2 id="q">×”×§×œ×£ ×™×•×¤×™×¢ ×›××Ÿâ€¦</h2>
<textarea id="answer" placeholder="×›×ª×‘×• ×›××Ÿ ××ª ×ª×©×•×‘×ª×›×..."></textarea>
</div>
<div class="toolbar">
<button class="btn" id="btnPrev">â¬…ï¸ ×”×§×•×“×</button>
<button class="btn accent" id="btnNext">â¡ï¸ ×”×‘×</button>
<button class="btn ghost" id="btnShuffle">ğŸ”€ ×¢×¨×‘×‘×•</button>
<button class="btn ghost" id="btnCopy">ğŸ“‹ ×”×¢×ª×§ ×©××œ×”</button>
<button class="btn ghost" id="btnTip">ğŸ’¡ ×˜×™×¤</button>
<button class="btn ghost" id="btnReset">ğŸ”„ ××™×¤×•×¡</button>
</div>
<p class="tip" id="tip">"×“×‘×¨×• ×‘×ª×•×¨×•×ª, ×‘×œ×™ ×œ×”×¤×¨×™×¢. ×”×§×©×‘×” ×™×•×¦×¨×ª ×§×™×¨×‘×”."</p>
</section>

<section id="screenHow" style="display:none">
<h3 style="margin:0 0 8px 0">××™×š ××©×—×§×™×</h3>
<ol class="muted">
<li>×©×‘×• ×–×” ××•×œ ×–×•, ×©×§×˜ ×•× ×¢×™×. ×›×‘×• ×”×ª×¨××•×ª.</li>
<li>×‘×›×œ ×ª×•×¨: ××—×“ ×§×•×¨× ××ª ×”×§×œ×£ ×•××©×™×‘, ×”×©× ×™ ××§×©×™×‘ ×¢×“ ×”×¡×•×£.</li>
<li>××•×ª×¨ ×œ×“×œ×’, ×œ×©×ª×£ ×§×¦×¨ ××• ××¨×•×š. ×‘×œ×™ ×‘×™×§×•×¨×ª, ×¨×§ ×¡×§×¨× ×•×ª ×˜×•×‘×”.</li>
<li>×‘×—×¨×• ××¦×‘: <strong>××¢×•×¨×‘×‘</strong> ×œ×©×™×œ×•×‘ ××¤×ª×™×¢, ××• <strong>××“×•×¨×’</strong> â€“ ×§×œ×¤×™× ×§×œ×™× â†’ ×¢××•×§×™×.</li>
</ol>
<div class="row">
<button class="btn" id="btnBack">×—×–×¨×”</button>
</div>
</section>

<div class="settingsPanel" id="settingsPanel">
<label>ğŸ”Š ×¦×œ×™×œ×™×: <input type="checkbox" id="soundToggle" checked></label>
<label>ğŸ”  ×’×•×“×œ ×˜×§×¡×˜: <input type="range" id="fontSizeRange" min="16" max="36" value="28"></label>
<label>ğŸ¨ ×¦×‘×¢ ×¨×§×¢: <input type="color" id="bgColor" value="#0b1220"></label>
</div>

<audio id="flipSound" src="flip.mp3"></audio>
<audio id="shuffleSound" src="shuffle.mp3"></audio>
<audio id="endSound" src="end.mp3"></audio>
<audio id="bgSound" src="background.mp3" loop></audio>

</div>
</div>
</div>
</div>

<script>
// --- ×××’×¨ ×”×§×œ×¤×™× ---
const CARDS = [
  {t:"××” ×¢×©×” ×œ×š ×˜×•×‘ ×”×©×‘×•×¢? ğŸ˜Š", lvl:1}, {t:"××™×–×• ××—×•×•×” ×§×˜× ×” ××©××— ×œ×¢×©×•×ª ×¢×‘×•×¨×š ×‘×™××™× ×”×§×¨×•×‘×™×?", lvl:1},
  {t:"×–×™×›×¨×•×Ÿ × ×¢×™× ×©×™×© ×œ×š ××©× ×™× ×• ××”×ª×§×•×¤×” ×”××—×¨×•× ×”.", lvl:1}, {t:"××™×–×” ×¨×’×¢ ×©×§×˜ ×‘×™×•× ×’×•×¨× ×œ×š ×œ×—×™×•×š?", lvl:1},
  {t:"×‘×—×¨/×™ ××™×œ×” ×©××ª××¨×ª ××ª ××¦×‘ ×”×¨×•×— ×©×œ×š ×”×™×•× ×•×”×¡×‘×¨/×™ ×œ××”.", lvl:1}, {t:"×“×‘×¨ ××—×“ ×§×˜×Ÿ ×©×× ×™ ×¢×•×©×” ×©×¢×•×–×¨ ×œ×š â€“ ××”×•?", lvl:1},
  {t:"××” ×’×•×¨× ×œ×‘×™×ª ×©×œ× ×• ×œ×”×¨×’×™×© ×‘×™×ª?", lvl:1}, {t:"××™×–×• ×ª×•×“×” ×ª×¨×¦×”/×™ ×œ×•××¨ ×œ×™ ×¢×›×©×™×•? ğŸ™", lvl:1},
  {t:"×©×™×ª×•×£ ×§×¦×¨: ××” ×œ××“×ª×™ ×¢×œ ×¢×¦××™ ×”×©×‘×•×¢?", lvl:1}, {t:"××” ×××œ× ×œ×š ×× ×¨×’×™×” ×œ××—×¨×•× ×”?", lvl:1},
  {t:"××” ×¢×•×–×¨ ×œ×š ×›×©×§×©×” ×œ×š ×œ×“×‘×¨?", lvl:2}, {t:"××™×–×• ×ª×›×•× ×” ×©×œ×š ×”×™×™×ª ×¨×•×¦×” ×©×™×¨××• ×‘×š ×™×•×ª×¨?", lvl:2},
  {t:"××” ×¢×•×–×¨ ×œ×š ×œ×”×¨×’×™×© ×©×× ×™ ×œ×¦×™×“×š?", lvl:2}, {t:"×¡×¤×¨/×™ ×¢×œ ×“××•×ª ×©× inspira ××•×ª×š ×•×œ××”.", lvl:2},
  {t:"××™×–×” ×”×¨×’×œ ×–×•×’×™ ×§×˜×Ÿ ×”×•×¡×™×£ ×œ× ×• ×˜×•×‘?", lvl:2}, {t:"××™×š ×ª×¨××” ×©×‘×ª/×™×•× ×—×•×¤×©×™ ×–×•×’×™ ××™×“××œ×™ ×‘×©×‘×™×œ×š?", lvl:2},
  {t:"××” ×’×•×¨× ×œ×š ×œ×”×¨×’×™×© ××•×¢×¨×š/×ª?", lvl:2}, {t:"××™×–×• ×©×™×—×” ×©×œ× ×• ×–×›×•×¨×” ×œ×š ×‘××™×•×—×“ ×•×œ××”?", lvl:2},
  {t:"××” ×”×›×™ ××¨×’×™×¢ ××•×ª×š ×›×©×™×© ×¢×•××¡?", lvl:2}, {t:"××™×–×• ××¡×•×¨×ª ××©×¤×—×ª×™×ª ×”×™×™×ª ×¨×•×¦×” ×œ×—×–×§?", lvl:2},
  {t:"×‘××™×–×” ×ª×—×•× ×”×™×™×ª×™ ×¨×•×¦×” ×œ×”×™×•×ª ×‘×©×‘×™×œ×š ×™×•×ª×¨?", lvl:3}, {t:"×¨×’×¢ ×××ª×’×¨ ×©×¢×‘×¨×ª×™ â€“ ×•××” ×”×™×” ×œ×™ ×‘×• ×—×©×•×‘ ×œ×©××•×¢.", lvl:3},
  {t:"××™×–×• ×ª×¤×™×œ×”/×›×•×•× ×” ×× ×™ ×œ×•×§×—/×ª ×œ×¢×¦×× ×• ×œ×ª×§×•×¤×” ×”×§×¨×•×‘×”?", lvl:3}, {t:"××” ××¤×—×™×“ ××•×ª×š ×œ×¤×¢××™×, ×•××™×š × ×•×›×œ ×œ×”×ª××•×“×“ ×™×—×“?", lvl:3},
  {t:"×¡×¤×¨/×™ ×¢×œ ×¢×¨×š ×©×”×•× ××¦×¤×Ÿ ×¢×‘×•×¨×š ×‘×–×•×’×™×•×ª.", lvl:3}, {t:"××”×• ×§×¦×‘ ×”×©×™×—×” ×©× ×¢×™× ×œ×š ×•××™×š ××–×”×” ×–××ª?", lvl:3},
  {t:"××™×–×• ×‘×§×©×” ×¢×“×™× ×” ×ª×¨×¦×”/×™ ×œ×‘×§×© ××× ×™?", lvl:3}, {t:"×“×•×’××” ×œ×›×š ×©×”×‘× ×• ×–×” ××ª ×–×• â€“ ×•×”×¨×’×©×ª ×—×™×‘×•×¨.", lvl:3},
  {t:"××” ×¢×•×–×¨ ×œ× ×• ×œ×¤×ª×•×¨ ××™-×”×‘× ×•×ª ×‘×¦×•×¨×” ×˜×•×‘×”?", lvl:3}, {t:"×¢×œ ××” ×ª×¨×¦×”/×™ ×œ×¡×œ×•×— â€“ ×œ×¢×¦××š ××• ×‘×›×œ×œ â€“ ×•××™×š ××ª/×” ××ª×§×“×/×ª ×‘×–×”?", lvl:3},
  {t:"××™×š × ×¨××” ×”×¢×ª×™×“ ×”××©×•×ª×£ ×©× ×¢×™× ×œ×š ×œ×“××™×™×Ÿ?", lvl:4}, {t:"××™×–×” ×”×¨×’×œ ×–×•×’×™ ×—×“×© × × ×¡×” ×™×—×“ ×”×—×•×“×©?", lvl:4},
  {t:"××” ×—×©×•×‘ ×©× ×©××•×¨ ×¢×œ×™×• ×’× ×›×©× ×”×™×” ×¢×¡×•×§×™×?", lvl:4}, {t:"××™×¤×” × ×¨×¦×” ×œ×”×™×•×ª ×‘×¢×•×“ ×©× ×” ××‘×—×™× ×ª ×§×©×¨ ×•×©×’×¨×”?", lvl:4},
  {t:"××™×–×• ×ª×•×“×” ×¢×ª×™×“×™×ª ×ª×¨×¦×”/×™ ×©××•××¨ ×œ×š ×‘×¢×•×“ ×—×¦×™ ×©× ×”?", lvl:4}, {t:"××™×–×” ×¢×™×§×¨×•×Ÿ ×ª×§×©×•×¨×ª × ×”×¤×•×š ×œ×›×œ×œ ×‘×™×ª×™?", lvl:4},
  {t:"×“××™×™×Ÿ/×™ ×¢×¨×‘ ×–×•×’×™ ×¤×©×•×˜ ×•××™×˜×™×‘ â€“ ××” ×™×”×™×” ×‘×•?", lvl:4}, {t:"××” × ×¨×¦×” ×œ×œ××•×“ ×™×—×“ ×‘×ª×§×•×¤×” ×”×§×¨×•×‘×”?", lvl:4},
  {t:"××™×œ×• ××¦×‘×™× ×›×“××™ ×©× × ×”×œ ×¢×œ×™×”× ×ª×™××•× ×¦×™×¤×™×•×ª ××¨××©?", lvl:4}, {t:"××™×–×” ×—×™×–×•×§ ××• ×¢×™×“×•×“ ×ª×¨×¦×”/×™ ×©××¢× ×™×§ ×œ×š ×™×•×ª×¨?", lvl:4},
  {t:"×¡×¤×¨/×™ ×¢×œ ×¨×’×¢ ×§×˜×Ÿ ×©×‘×• ×”×¨×’×©×ª ×©× ×–×›×¨×ª×™ ×‘×š ×‘××”×‘×”.", lvl:2}, {t:"××” ××§×œ ×¢×œ×™×š ×œ×©×ª×£ ×›×©×™×© ××™-× ×•×—×•×ª?", lvl:2},
  {t:"××™×–×” ××§×•× ×©×§×˜ ×”×™×™×ª ×¨×•×¦×” ×©× ×—×–×•×¨ ××œ×™×• ×™×—×“?", lvl:1}, {t:"××™×–×” ××©×¤×˜ ×˜×•×‘ ×ª×¨×¦×”/×™ ×œ×©××•×¢ ××× ×™ ×œ×¢×™×ª×™× ×§×¨×•×‘×•×ª ×™×•×ª×¨?", lvl:3},
  {t:"××”×• ×’×‘×•×œ ××™×©×™ ×©×—×©×•×‘ ×œ×š ×©××›×‘×“, ×•××™×š ××–×›×•×¨ ×–××ª?", lvl:3}, {t:"××” × ×•×ª×Ÿ ×œ×š ×ª×—×•×©×ª ××©××¢×•×ª ×‘×™××™× ×¢××•×¡×™×?", lvl:2},
  {t:"××™×–×” ×”×¨×’×œ ×§×˜×Ÿ ×ª×¨×¦×”/×™ ×œ×”× ×™×— ×‘×¦×“ â€“ ×•××™×š ××¢×–×•×¨ ×œ×š ×‘×–×”?", lvl:4}, {t:"×¢×œ ××™×–×” ×—×¡×“ ×©×§×™×‘×œ× ×• ×œ××—×¨×•× ×” ×ª×¨×¦×”/×™ ×œ×”×•×“×•×ª?", lvl:1},
  {t:"×›×©×™×© ×‘×™× ×™× ×• ×©×§×˜ â€“ ××” ×‘×¢×™× ×™×š ×”×©×§×˜ ×”×–×” ××•××¨?", lvl:3}, {t:"××™×–×• ××¡×™×œ×” ×©×œ ×©××—×” × ×›× ×™×¡ ×œ×©×‘×•×¢ ×©×œ× ×•?", lvl:4}
];

const TIPS = [
  "×“×‘×¨×• ×‘×ª×•×¨×•×ª, ×‘×œ×™ ×œ×”×¤×¨×™×¢. ×”×§×©×‘×” ×™×•×¦×¨×ª ×§×™×¨×‘×”.",
  "×©××œ×• ×©××œ×•×ª ×”××©×š ×‘×¡×§×¨× ×•×ª ×¢×“×™× ×”, ×œ× ×‘×—×§×™×¨×”.",
  "××©×¨×• ×¨×’×©×•×ª: \"×©××¢×ª×™, ×–×” ×—×©×•×‘ ×œ×š\".",
  "××¤×©×¨ ×œ×§×—×ª ×¨×’×¢ ×©×§×˜ ×œ×—×©×™×‘×” â€“ ×–×” ××‘×•×¨×š.",
  "×”×™×× ×¢×• ××¢×¦×•×ª ××™×“. ×§×•×“× ×œ×”×‘×™×Ÿ, ××—×¨ ×›×š ×œ×”×¦×™×¢.",
  "×× × ×•×’×¢×™× ×‘× ×•×©× ×¨×’×™×© â€“ × ×©××• ×¢××•×§, ×“×‘×¨×• ×œ××˜.",
  "×—×¤×©×• ××ª ×”×˜×•×‘. ×“×™×‘×•×¨ ×˜×•×‘ ×‘×•× ×” ×œ×‘ ×˜×•×‘."
];

const el = (id)=>document.getElementById(id);
const screens = { start:el('screenStart'), game:el('screenGame'), how:el('screenHow') };
const card = { badge:el('badge'), idx:el('idx'), q:el('q'), answer:el('answer') };
const posEl = el('pos'), totalEl = el('total'), clockEl = el('clock'), tipEl = el('tip');
let deck=[], pos=0, timer=null, seconds=0, tipIdx=0, soundOn=true, answers=[];

const flipSound=el('flipSound'), shuffleSound=el('shuffleSound'), endSound=el('endSound'), bgAudio=el('bgSound');

// --- ×¤×•× ×§×¦×™×•×ª ---
function formatTime(s){ const m=Math.floor(s/60).toString().padStart(2,'0'); const ss=(s%60).toString().padStart(2,'0'); return `${m}:${ss}`; }
function startClock(){ stopClock(); timer=setInterval(()=>{ seconds++; clockEl.textContent=formatTime(seconds); },1000); }
function stopClock(){ if(timer){ clearInterval(timer); timer=null; } }
function resetAll(){ seconds=0; clockEl.textContent='00:00'; pos=0; render(); }
function fisherYates(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
function buildDeckMixed(){ deck=fisherYates([...CARDS]); }
function buildDeckLeveled(){ deck=[1,2,3,4].map(l=>fisherYates(CARDS.filter(c=>c.lvl===l))).flat(); }
function render(){
  totalEl.textContent=deck.length; posEl.textContent=Math.min(pos+1, deck.length);
  if(deck[pos]){ card.q.textContent=deck[pos].t; card.answer.value=answers[pos]||''; tipEl.textContent=TIPS[tipIdx]; }
}
function showTip(){ tipIdx=(tipIdx+1)%TIPS.length; tipEl.textContent=TIPS[tipIdx]; if(soundOn) flipSound.play(); }
function saveAnswer(){ answers[pos]=card.answer.value; }

// --- × ×™×”×•×œ ×¡×©×Ÿ ××•×’×‘×œ ---
function checkLock(){
  let plays=parseInt(localStorage.getItem('plays')||'0');
  if(plays>=2){ showEndScreen(); return true; }
  return false;
}
function incrementPlays(){ let plays=parseInt(localStorage.getItem('plays')||'0'); plays++; localStorage.setItem('plays',plays); }
function showEndScreen(){
  screens.start.style.display='none'; screens.game.style.display='none'; screens.how.style.display='none';
  stopClock(); bgAudio.pause(); endSound.play();
  const endDiv=document.createElement('div');
  endDiv.style.cssText='position:fixed; inset:0; background:rgba(20,20,40,0.95); color:white; display:flex; flex-direction:column; align-items:center; justify-content:center; font-size:24px; text-align:center; z-index:9999;';
  endDiv.innerHTML=`<p>ğŸ”’ ×”××©×—×§ × ×’××¨ â€“ ×œ× × ×™×ª×Ÿ ×œ×”×¤×¢×™×œ×• ×™×•×ª×¨</p><p>×ª×•×“×” ×©×©×™×—×§×ª ××ª ×”×¤×¢××™×™× ×”××•×ª×¨×™×!</p>`;
  document.body.appendChild(endDiv);
}

// --- ××™×¨×•×¢×™× ---
el('btnStart').onclick = ()=>{
  if(checkLock()) return;
  incrementPlays();
  screens.start.style.display='none'; screens.game.style.display='block';
  buildDeckMixed(); answers=Array(deck.length).fill(''); pos=0; render(); startClock(); bgAudio.play();
};
el('btnPlayMixed').onclick = el('btnStart').onclick;
el('btnPlayLeveled').onclick = ()=>{
  if(checkLock()) return;
  incrementPlays();
  screens.start.style.display='none'; screens.game.style.display='block';
  buildDeckLeveled(); answers=Array(deck.length).fill(''); pos=0; render(); startClock(); bgAudio.play();
};

el('btnHow').onclick = ()=>{ screens.start.style.display='none'; screens.how.style.display='block'; }
el('btnBack').onclick = ()=>{ screens.how.style.display='none'; screens.start.style.display='block'; }
el('btnNext').onclick = ()=>{
  saveAnswer(); if(pos<deck.length-1){ pos++; render(); if(soundOn) flipSound.play(); } 
};
el('btnPrev').onclick = ()=>{ saveAnswer(); if(pos>0){ pos--; render(); if(soundOn) flipSound.play(); } };
el('btnShuffle').onclick = ()=>{ deck=fisherYates(deck); render(); if(soundOn) shuffleSound.play(); }
el('btnTip').onclick = showTip;
el('btnCopy').onclick = ()=>{ navigator.clipboard.writeText(deck[pos]?.t||''); }
el('btnReset').onclick = resetAll;

// ×”×’×“×¨×•×ª
el('btnSettings').onclick=()=>{ const panel=el('settingsPanel'); panel.style.display=(panel.style.display==='block')?'none':'block'; }
el('soundToggle').onchange=e=>{ soundOn=e.target.checked; }
el('fontSizeRange').oninput=e=>{ card.q.style.fontSize=e.target.value+'px'; }
el('bgColor').oninput=e=>{ document.body.style.background=e.target.value; }

// ×‘×“×™×§×” ××™×™×“×™×ª
checkLock();
</script>
</body>
</html>

