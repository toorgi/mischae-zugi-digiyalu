<!doctype html>
<html lang="he" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>קלפי שיח זוגי – 40 קלפים</title>
<link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1220;
  --card:#121a2b;
  --ink:#eaf2ff;
  --muted:#b9c7e6;
  --accent:#6aa9ff;
  --good:#39d98a;
  --warn:#ffd166;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans Hebrew", "Rubik", Arial, sans-serif;
  background: radial-gradient(1200px 600px at 70% -10%, #1d2b4a 0%, transparent 60%),
              radial-gradient(900px 500px at -20% 110%, #1a2742 0%, transparent 60%),
              var(--bg);
  color:var(--ink);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:32px;
}
.app{width:min(880px,100%);}
.shell{background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
border:1px solid rgba(255,255,255,0.08); border-radius:22px; box-shadow:0 20px 60px rgba(0,0,0,0.35); overflow:hidden}
header{padding:18px 20px; display:flex; align-items:center; gap:12px; justify-content:space-between; background:rgba(10,15,25,0.6); border-bottom:1px solid rgba(255,255,255,0.08); backdrop-filter: blur(6px);}
.brand{display:flex; align-items:center; gap:12px}
.logo{width:36px; height:36px; border-radius:12px; background:conic-gradient(from 220deg at 50% 50%, #5cabff, #7ae0ff, #5cabff); box-shadow:inset 0 0 18px rgba(255,255,255,0.5), 0 6px 22px rgba(106,169,255,0.5)}
.title{font-weight:700; letter-spacing:0.2px}
.muted{color:var(--muted); font-size:14px}
.row{display:flex; align-items:center; gap:10px; flex-wrap:wrap}
.btn{appearance:none; border:none; border-radius:14px; padding:10px 14px; color:#0c1322; background:white; font-weight:700; cursor:pointer}
.btn.ghost{background:transparent; color:var(--ink); border:1px solid rgba(255,255,255,0.2)}
.btn.accent{background:linear-gradient(180deg,#86b9ff,#5ba1ff); color:#081222}
.btn:disabled{opacity:.5; cursor:not-allowed}
.main{padding:22px}
.panel{display:grid; gap:18px}
.card{position:relative; min-height:220px; background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02)); border:1px solid rgba(255,255,255,0.1); border-radius:20px; padding:26px; display:flex; flex-direction:column; align-items:center; justify-content:center; text-align:center;}
.card h2{margin:0; font-size:32px; font-weight:700; font-family: 'Caveat', cursive; line-height:1.3; text-align:center;}
.card .badge{position:absolute; top:14px; inset-inline-start:14px; font-size:12px; color:var(--bg); background:var(--warn); padding:4px 8px; border-radius:999px; font-weight:800}
.card .idx{position:absolute; top:14px; inset-inline-end:14px; font-size:12px; color:var(--muted);}
.toolbar{display:flex; flex-wrap:wrap; gap:10px; justify-content:center}
.toolbar .btn{padding:10px 12px}
.statusbar{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:10px 14px; border:1px dashed rgba(255,255,255,0.18); border-radius:14px; color:var(--muted)}
.grow{flex:1}
.start{display:grid; gap:16px; text-align:center; padding:26px}
.pill{display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.1); color:var(--muted); font-size:14px}
.tip{font-size:14px; color:var(--muted); text-align:center}
.small{font-size:12px}
.settingsPanel{display:none; position:fixed; top:50px; right:50px; background:rgba(20,30,50,0.95); border-radius:14px; padding:16px; border:1px solid rgba(255,255,255,0.2);}
.settingsPanel label{display:block; margin:6px 0; font-size:14px; color:var(--muted);}
</style>
</head>
<body>
<div class="app">
<div class="shell" id="app">
<header>
<div class="brand">
<div class="logo" aria-hidden="true"></div>
<div>
<div class="title">קלפי שיח זוגי</div>
<div class="muted small">40 קלפים · גרסת מחשב</div>
</div>
</div>
<div class="row">
<button class="btn ghost" id="btnHow">איך משחקים?</button>
<button class="btn accent" id="btnStart">התחל</button>
<button class="btn ghost" id="btnSettings">⚙ הגדרות</button>
</div>
</header>
<div class="main">
<div class="panel" id="panel">
<section class="start" id="screenStart">
<div class="pill">🎯 מטרת המשחק: זמן של הקשבה, חיבור ושיחה נינוחה</div>
<h1 style="margin:0">ברוכים הבאים</h1>
<p class="muted" style="margin-top:0">כל קלף מציע שאלה לפתיחת שיחה. ענו בתורכם. אין נכון או לא נכון.</p>
<div class="toolbar" style="justify-content:center">
<button class="btn accent" id="btnPlayMixed">שחקו מעורבב 🎲</button>
<button class="btn" id="btnPlayLeveled">שחקו מדורג ⬆️</button>
</div>
<div class="tip">טיפ: הגדילו למסך מלא (F11) ונשמו עמוק. זה הזמן שלכם. 💙</div>
</section>

<section id="screenGame" style="display:none">
<div class="statusbar">
<div>⏱️ זמן משחק: <strong id="clock">00:00</strong></div>
<div class="grow"></div>
<div>קלף <strong id="pos">1</strong>/<span id="total">40</span></div>
</div>
<div class="card" id="card">
<div class="badge" id="badge"></div>
<div class="idx" id="idx"></div>
<h2 id="q">הקלף יופיע כאן…</h2>
</div>
<div class="toolbar">
<button class="btn" id="btnPrev">⬅️ הקודם</button>
<button class="btn accent" id="btnNext">➡️ הבא</button>
<button class="btn ghost" id="btnShuffle">🔀 ערבבו</button>
<button class="btn ghost" id="btnCopy">📋 העתק שאלה</button>
<button class="btn ghost" id="btnTip">💡 טיפ</button>
<button class="btn ghost" id="btnReset">🔄 איפוס</button>
</div>
<p class="tip" id="tip">"דברו בתורות, בלי להפריע. הקשבה יוצרת קירבה."</p>
</section>

<section id="screenHow" style="display:none">
<h3 style="margin:0 0 8px 0">איך משחקים</h3>
<ol class="muted">
<li>שבו זה מול זו, שקט ונעים. כבו התראות.</li>
<li>בכל תור: אחד קורא את הקלף, השני מקשיב עד הסוף.</li>
<li>מותר לדלג, לשתף קצר או ארוך. בלי ביקורת, רק סקרנות טובה.</li>
<li>בחרו מצב: <strong>מעורבב</strong> לשילוב מפתיע, או <strong>מדורג</strong> – קלפים קלים → עמוקים.</li>
</ol>
<div class="row">
<button class="btn" id="btnBack">חזרה</button>
</div>
</section>

<div class="settingsPanel" id="settingsPanel">
<label>🔊 צלילים: <input type="checkbox" id="soundToggle" checked></label>
<label>🔠 גודל טקסט: <input type="range" id="fontSizeRange" min="16" max="36" value="32"></label>
<label>🎨 צבע רקע: <input type="color" id="bgColor" value="#0b1220"></label>
</div>

<audio id="flipSound" src="flip.mp3"></audio>
<audio id="shuffleSound" src="shuffle.mp3"></audio>
<audio id="endSound" src="end.mp3"></audio>
<audio id="bgSound" src="background.mp3" loop></audio>

</div>
</div>
</div>
</div>

<script>
// --- מאגר הקלפים ---
const CARDS = [
  {t:"מה עשה לך טוב השבוע? 😊", lvl:1}, {t:"איזו מחווה קטנה אשמח לעשות עבורך בימים הקרובים?", lvl:1},
  {t:"זיכרון נעים שיש לך משנינו מהתקופה האחרונה.", lvl:1}, {t:"איזה רגע שקט ביום גורם לך לחיוך?", lvl:1},
  {t:"בחר/י מילה שמתארת את מצב הרוח שלך היום והסבר/י למה.", lvl:1}, {t:"דבר אחד קטן שאני עושה שעוזר לך – מהו?", lvl:1},
  {t:"מה גורם לבית שלנו להרגיש בית?", lvl:1}, {t:"איזו תודה תרצה/י לומר לי עכשיו? 🙏", lvl:1},
  {t:"שיתוף קצר: מה למדתי על עצמי השבוע?", lvl:1}, {t:"מה ממלא לך אנרגיה לאחרונה?", lvl:1},
  {t:"מה עוזר לך כשקשה לך לדבר?", lvl:2}, {t:"איזו תכונה שלך היית רוצה שיראו בך יותר?", lvl:2},
  {t:"מה עוזר לך להרגיש שאני לצידך?", lvl:2}, {t:"ספר/י על דמות שמ inspira אותך ולמה.", lvl:2},
  {t:"איזה הרגל זוגי קטן הוסיף לנו טוב?", lvl:2}, {t:"איך תראה שבת/יום חופשי זוגי אידאלי בשבילך?", lvl:2},
  {t:"מה גורם לך להרגיש מוערך/ת?", lvl:2}, {t:"איזו שיחה שלנו זכורה לך במיוחד ולמה?", lvl:2},
  {t:"מה הכי מרגיע אותך כשיש עומס?", lvl:2}, {t:"איזו מסורת משפחתית היית רוצה לחזק?", lvl:2},
  {t:"באיזה תחום הייתי רוצה להיות בשבילך יותר?", lvl:3}, {t:"רגע מאתגר שעברתי – ומה היה לי בו חשוב לשמוע.", lvl:3},
  {t:"איזו תפילה/כוונה אני לוקח/ת לעצמנו לתקופה הקרובה?", lvl:3}, {t:"מה מפחיד אותך לפעמים, ואיך נוכל להתמודד יחד?", lvl:3},
  {t:"ספר/י על ערך שהוא מצפן עבורך בזוגיות.", lvl:3}, {t:"מהו קצב השיחה שנעים לך ואיך אזהה זאת?", lvl:3},
  {t:"איזו בקשה עדינה תרצה/י לבקש ממני?", lvl:3}, {t:"דוגמה לכך שהבנו זה את זו – והרגשת חיבור.", lvl:3},
  {t:"מה עוזר לנו לפתור אי-הבנות בצורה טובה?", lvl:3}, {t:"על מה תרצה/י לסלוח – לעצמך או בכלל – ואיך את/ה מתקדם/ת בזה?", lvl:3},
  {t:"איך נראה העתיד המשותף שנעים לך לדמיין?", lvl:4}, {t:"איזה הרגל זוגי חדש ננסה יחד החודש?", lvl:4},
  {t:"מה חשוב שנשמור עליו גם כשנהיה עסוקים?", lvl:4}, {t:"איפה נרצה להיות בעוד שנה מבחינת קשר ושגרה?", lvl:4},
  {t:"איזו תודה עתידית תרצה/י שאומר לך בעוד חצי שנה?", lvl:4}, {t:"איזה עיקרון תקשורת נהפוך לכלל ביתי?", lvl:4},
  {t:"דמיין/י ערב זוגי פשוט ומיטיב – מה יהיה בו?", lvl:4}, {t:"מה נרצה ללמוד יחד בתקופה הקרובה?", lvl:4},
  {t:"אילו מצבים כדאי שננהל עליהם תיאום ציפיות מראש?", lvl:4}, {t:"איזה חיזוק או עידוד תרצה/י שאעניק לך יותר?", lvl:4},
  {t:"ספר/י על רגע קטן שבו הרגשת שנזכרתי בך באהבה.", lvl:2}, {t:"מה מקל עליך לשתף כשיש אי-נוחות?", lvl:2},
  {t:"איזה מקום שקט היית רוצה שנחזור אליו יחד?", lvl:1}, {t:"איזה משפט טוב תרצה/י לשמוע ממני לעיתים קרובות יותר?", lvl:3},
  {t:"מהו גבול אישי שחשוב לך שאכבד, ואיך אזכור זאת?", lvl:3}, {t:"מה נותן לך תחושת משמעות בימים עמוסים?", lvl:2},
  {t:"איזה הרגל קטן תרצה/י להניח בצד – ואיך אעזור לך בזה?", lvl:4}, {t:"על איזה חסד שקיבלנו לאחרונה תרצה/י להודות?", lvl:1},
  {t:"כשיש בינינו שקט – מה בעיניך השקט הזה אומר?", lvl:3}, {t:"איזו מסילה של שמחה נכניס לשבוע שלנו?", lvl:4}
];

const TIPS = [
  "דברו בתורות, בלי להפריע. הקשבה יוצרת קירבה.",
  "שאלו שאלות המשך בסקרנות עדינה, לא בחקירה.",
  "אשרו רגשות: \"שמעתי, זה חשוב לך\".",
  "אפשר לקחת רגע שקט לחשיבה – זה מבורך.",
  "הימנעו מעצות מיד. קודם להבין, אחר כך להציע.",
  "אם נוגעים בנושא רגיש – נשמו עמוק, דברו לאט.",
  "חפשו את הטוב. דיבור טוב בונה לב טוב."
];

const el = (id)=>document.getElementById(id);
const screens = { start:el('screenStart'), game:el('screenGame'), how:el('screenHow') };
const cardEl = { q:el('q') };
const posEl = el('pos'), totalEl = el('total'), clockEl = el('clock'), tipEl = el('tip');
let deck=[], pos=0, timer=null, seconds=0, tipIdx=0, soundOn=true;

// קולות
const flipSound=el('flipSound'), shuffleSound=el('shuffleSound'), endSound=el('endSound'), bgAudio=el('bgSound');

// --- פונקציות ---
function formatTime(s){ const m=Math.floor(s/60).toString().padStart(2,'0'); const ss=(s%60).toString().padStart(2,'0'); return `${m}:${ss}`; }
function startClock(){ stopClock(); timer=setInterval(()=>{ seconds++; clockEl.textContent=formatTime(seconds); },1000); }
function stopClock(){ if(timer){ clearInterval(timer); timer=null; } }
function resetAll(){ seconds=0; clockEl.textContent='00:00'; pos=0; render(); }
function fisherYates(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
function buildDeckMixed(){ deck=fisherYates([...CARDS]); }
function buildDeckLeveled(){ deck=[1,2,3,4].map(l=>fisherYates(CARDS.filter(c=>c.lvl===l))).flat(); }
function render(){ totalEl.textContent=deck.length; posEl.textContent=Math.min(pos+1, deck.length); if(deck[pos]) cardEl.q.textContent=deck[pos].t; tipEl.textContent=TIPS[tipIdx]; }
function showTip(){ tipIdx=(tipIdx+1)%TIPS.length; tipEl.textContent=TIPS[tipIdx]; if(soundOn) flipSound.play(); }

// --- אירועים ---
el('btnStart').onclick = ()=>{ screens.start.style.display='none'; screens.game.style.display='block'; buildDeckMixed(); pos=0; render(); startClock(); bgAudio.play().catch(()=>{}); };
el('btnPlayMixed').onclick = el('btnStart').onclick;
el('btnPlayLeveled').onclick = ()=>{ screens.start.style.display='none'; screens.game.style.display='block'; buildDeckLeveled(); pos=0; render(); startClock(); bgAudio.play().catch(()=>{}); };
el('btnHow').onclick = ()=>{ screens.start.style.display='none'; screens.how.style.display='block'; };
el('btnBack').onclick = ()=>{ screens.how.style.display='none'; screens.start.style.display='block'; };
el('btnNext').onclick = ()=>{ if(pos<deck.length-1){ pos++; render(); if(soundOn) flipSound.play(); } };
el('btnPrev').onclick = ()=>{ if(pos>0){ pos--; render(); if(soundOn) flipSound.play(); } };
el('btnShuffle').onclick = ()=>{ deck=fisherYates(deck); render(); if(soundOn) shuffleSound.play(); };
el('btnTip').onclick = showTip;
el('btnCopy').onclick = ()=>{ navigator.clipboard.writeText(deck[pos]?.t||''); };
el('btnReset').onclick = resetAll;

// הגדרות
el('btnSettings').onclick=()=>{ const panel=el('settingsPanel'); panel.style.display=(panel.style.display==='block')?'none':'block'; }
el('soundToggle').onchange=e=>{ soundOn=e.target.checked; }
el('fontSizeRange').oninput=e=>{ cardEl.q.style.fontSize=e.target.value+'px'; }
el('bgColor').oninput=e=>{ document.body.style.background=e.target.value; }

// --- גופן מעניין יותר ---
cardEl.q.style.fontFamily='"Chalkboard SE", "Comic Sans MS", sans-serif';
</script>
</body>
</html>
